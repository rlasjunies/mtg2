{"version":3,"sources":["authorization/authorizationRoutes.ts"],"names":["getAllRoles"],"mappings":";;;;;;;;IACA,IAAO,EAAE,WAAW,UAAU,CAAC,CAAC;IAChC,IAAO,CAAC,WAAW,iBAAiB,CAAC,CAAC;IAGtC,IAAI,UAAU,GAAG,sBAAsB,CAAC;IAExC,qBAA4B,MAAmC,EAAE,MAAkB,EAAE,IAAa;QAC9FA,AACAA,kGADkGA;YAC9FA,UAAUA,GAAGA,CAACA,CAACA,MAAMA,CAACA,aAAaA,CAACA;QACxCA,CAACA,CAACA,GAAGA,CAACA,IAAIA,CAACA,kBAAkBA,GAAGA,UAAUA,CAACA,CAACA;QAE5CA,EAAEA,CAACA,MAAMA,CAACA,UAAUA,EAACA,UAACA,cAAuBA;YACzCA,EAAEA,CAACA,CAACA,CAACA,cAAcA,CAACA,CAACA,CAACA;gBAClBA,MAAMA;qBACDA,MAAMA,CAACA,GAAGA,CAACA;qBACXA,MAAMA,CAACA,EAAEA,cAAcA,EAAEA,kBAAkBA,EAAEA,CAACA;qBAC9CA,IAAIA,CAACA,EAAEA,KAAKA,EAAEA,IAAIA,EAAEA,QAAQA,EAAEA,uBAAuBA,EAAEA,CAACA,CAACA;YAClEA,CAACA;YAACA,IAAIA,CAACA,CAACA;gBACJA,EAAEA,CAACA,QAAQA,CAACA,UAAUA,EAAEA,MAAMA,EAACA,UAACA,GAAUA,EAAEA,IAAQA;oBAChDA,EAAEA,CAACA,CAACA,GAAGA,CAACA,CAACA,CAACA;wBACNA,MAAMA,CAACA,MAAMA,CAACA,GAAGA,CAACA;6BACbA,MAAMA,CAACA,EAAEA,cAAcA,EAAEA,kBAAkBA,EAAEA,CAACA;6BAC9CA,IAAIA,CAACA,EAAEA,KAAKA,EAAEA,IAAIA,EAAEA,QAAQA,EAAEA,kCAAkCA,EAAEA,CAACA,CAACA;oBAC7EA,CAACA;oBAACA,IAAIA,CAACA,CAACA;wBACJA,MAAMA;6BACDA,MAAMA,CAACA,GAAGA,CAACA;6BACXA,MAAMA,CAACA,EAAEA,cAAcA,EAAEA,kBAAkBA,EAAEA,CAACA;6BAE9CA,IAAIA,CAACA,IAAIA,CAACA,CAACA;oBACpBA,CAACA;gBACLA,CAACA,CAACA,CAACA;YACPA,CAACA;QACLA,CAACA,CAACA,CAACA;IACPA,CAACA;IA3Be,mBAAW,cA2B1B,CAAA","file":"authorization/authorizationRoutes.js","sourcesContent":["import e = require(\"express\");\r\nimport fs = require(\"fs-extra\");\r\nimport $ = require(\"../services/mtg\");\r\nimport path = require(\"path\");\r\n \r\nvar moduleName = \"authorizationRoutes@\";\r\n\r\nexport function getAllRoles(expReq: e.xRequest<e.IRouteParamId>, expRes: e.Response, next:Function) {\r\n    //TODO refactor the code to provide a generic file function and share it with hasRole function ...\r\n    var sourceFile = $.server.rolesFileName;\r\n    $.log.info(\"read roles file:\" + sourceFile);\r\n    \r\n    fs.exists(sourceFile,(isFileExisting: boolean) => {\r\n        if (!isFileExisting) {\r\n            expRes\r\n                .status(406)\r\n                .header({ 'content-type': 'application/json' })\r\n                .send({ error: true, errorMsg: \"Roles File is missing\" });\r\n        } else {\r\n            fs.readFile(sourceFile, \"utf8\",(err: Error, data:any) => {\r\n                if (err) {\r\n                    expRes.status(500)\r\n                        .header({ 'content-type': 'application/json' })\r\n                        .send({ error: true, errorMsg: \"Error Reading Access right files\" });\r\n                } else {\r\n                    expRes\r\n                        .status(200)\r\n                        .header({ 'content-type': 'application/json' })\r\n                    //.send({ \"prop\": \"value\" });\r\n                        .send(data);\r\n                }\r\n            });\r\n        }\r\n    });\r\n}\r\n\r\n\r\n"],"sourceRoot":"/source/"}