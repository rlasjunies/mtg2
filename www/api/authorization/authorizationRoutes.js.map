{"version":3,"sources":["authorization/authorizationRoutes.ts"],"names":["getAllRoles"],"mappings":"AACA,IAAY,EAAE,WAAM,UAAU,CAAC,CAAA;AAC/B,IAAY,CAAC,WAAM,iBAAiB,CAAC,CAAA;AAGrC,IAAI,UAAU,GAAG,sBAAsB,CAAC;AAExC,qBAA4B,MAAmC,EAAE,MAAkB,EAAE,IAAa;IAC9FA,kGAAkGA;IAClGA,IAAIA,UAAUA,GAAGA,CAACA,CAACA,MAAMA,CAACA,aAAaA,CAACA;IACxCA,CAACA,CAACA,GAAGA,CAACA,IAAIA,CAACA,kBAAkBA,GAAGA,UAAUA,CAACA,CAACA;IAE5CA,EAAEA,CAACA,MAAMA,CAACA,UAAUA,EAACA,UAACA,cAAuBA;QACzCA,EAAEA,CAACA,CAACA,CAACA,cAAcA,CAACA,CAACA,CAACA;YAClBA,MAAMA;iBACDA,MAAMA,CAACA,GAAGA,CAACA;iBACXA,MAAMA,CAACA,EAAEA,cAAcA,EAAEA,kBAAkBA,EAAEA,CAACA;iBAC9CA,IAAIA,CAACA,EAAEA,KAAKA,EAAEA,IAAIA,EAAEA,QAAQA,EAAEA,uBAAuBA,EAAEA,CAACA,CAACA;QAClEA,CAACA;QAACA,IAAIA,CAACA,CAACA;YACJA,EAAEA,CAACA,QAAQA,CAACA,UAAUA,EAAEA,MAAMA,EAACA,UAACA,GAAUA,EAAEA,IAAQA;gBAChDA,EAAEA,CAACA,CAACA,GAAGA,CAACA,CAACA,CAACA;oBACNA,MAAMA,CAACA,MAAMA,CAACA,GAAGA,CAACA;yBACbA,MAAMA,CAACA,EAAEA,cAAcA,EAAEA,kBAAkBA,EAAEA,CAACA;yBAC9CA,IAAIA,CAACA,EAAEA,KAAKA,EAAEA,IAAIA,EAAEA,QAAQA,EAAEA,kCAAkCA,EAAEA,CAACA,CAACA;gBAC7EA,CAACA;gBAACA,IAAIA,CAACA,CAACA;oBACJA,MAAMA;yBACDA,MAAMA,CAACA,GAAGA,CAACA;yBACXA,MAAMA,CAACA,EAAEA,cAAcA,EAAEA,kBAAkBA,EAAEA,CAACA;yBAE9CA,IAAIA,CAACA,IAAIA,CAACA,CAACA;gBACpBA,CAACA;YACLA,CAACA,CAACA,CAACA;QACPA,CAACA;IACLA,CAACA,CAACA,CAACA;AACPA,CAACA;AA3Be,mBAAW,cA2B1B,CAAA","file":"authorization/authorizationRoutes.js","sourcesContent":["import * as e from \"express\";\r\nimport * as fs from \"fs-extra\";\r\nimport * as $ from \"../services/mtg\";\r\nimport * as  path from \"path\";\r\n\r\nvar moduleName = \"authorizationRoutes@\";\r\n\r\nexport function getAllRoles(expReq: e.xRequest<e.IRouteParamId>, expRes: e.Response, next:Function) {\r\n    //TODO refactor the code to provide a generic file function and share it with hasRole function ...\r\n    var sourceFile = $.server.rolesFileName;\r\n    $.log.info(\"read roles file:\" + sourceFile);\r\n\r\n    fs.exists(sourceFile,(isFileExisting: boolean) => {\r\n        if (!isFileExisting) {\r\n            expRes\r\n                .status(406)\r\n                .header({ 'content-type': 'application/json' })\r\n                .send({ error: true, errorMsg: \"Roles File is missing\" });\r\n        } else {\r\n            fs.readFile(sourceFile, \"utf8\",(err: Error, data:any) => {\r\n                if (err) {\r\n                    expRes.status(500)\r\n                        .header({ 'content-type': 'application/json' })\r\n                        .send({ error: true, errorMsg: \"Error Reading Access right files\" });\r\n                } else {\r\n                    expRes\r\n                        .status(200)\r\n                        .header({ 'content-type': 'application/json' })\r\n                    //.send({ \"prop\": \"value\" });\r\n                        .send(data);\r\n                }\r\n            });\r\n        }\r\n    });\r\n}\r\n\r\n\r\n"],"sourceRoot":"/source/"}