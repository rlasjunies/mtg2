{"version":3,"sources":["services/db.ts"],"names":["connect"],"mappings":";;;;;;;;IAAA,IAAO,QAAQ,WAAW,UAAU,CAAC,CAAC;IACtC,IAAO,OAAO,WAAW,UAAU,CAAC,CAAC;IACrC,IAAO,OAAO,WAAW,UAAU,CAAC,CAAC;IACrC,IAAO,aAAa,WAAW,gBAAgB,CAAC,CAAC;IACjD,IAAO,IAAI,WAAW,UAAU,CAAC,CAAC;IAKvB,iBAAS,GAAG,OAAO,CAAC,SAAS,CAAC,QAAQ,CAAC,OAAO,EAAE,QAAQ,CAAC,CAAC;IAErE;QACIA,IAAIA,CAACA,KAAKA,CAACA,cAAcA,GAAGA,OAAOA,CAACA,GAAGA,CAACA,QAAQA,CAACA,CAACA;QAClDA,IAAIA,CAACA,KAAKA,CAACA,sCAAsCA,GAAGA,OAAOA,CAACA,eAAeA,CAACA,OAAOA,CAACA,GAAGA,CAACA,QAAQA,CAACA,CAACA,CAACA;QACnGA,IAAIA,CAACA,KAAKA,CAACA,iGAAiGA;cACtGA,OAAOA,CAACA,eAAeA,CAACA,OAAOA,CAACA,GAAGA,CAACA,QAAQA,CAACA,CAACA,OAAOA,CAACA,QAAQA,EAAEA,aAAaA,CAACA,EAAEA,CAACA,OAAOA,CAACA,GAAGA,CAACA,CAACA,CAACA,CAACA;QAEtGA,IAAIA,aAAaA,GAAUA,OAAOA,CAACA,eAAeA,CAACA,OAAOA,CAACA,GAAGA,CAACA,QAAQA,CAACA,CAACA,OAAOA,CAACA,QAAQA,EAAEA,aAAaA,CAACA,EAAEA,CAACA,OAAOA,CAACA,GAAGA,CAACA,QAAQA,CAACA,CAACA,CAACA;QACnIA,iBAASA,CAACA,aAAaA,EAACA,EAAEA,CAACA;aACtBA,IAAIA,CAACA;YACFA,IAAIA,CAACA,KAAKA,CAACA,kBAAkBA,CAACA,CAACA;QACnCA,CAACA,CAACA,CAACA;IACXA,CAACA;IAXe,eAAO,UAWtB,CAAA;IAEU,oBAAY,GAAG,OAAO,CAAC,SAAS,CAAC,QAAQ,CAAC,UAAU,EAAE,QAAQ,CAAC,CAAC","file":"services/db.js","sourcesContent":["import mongoose = require(\"mongoose\");\r\nimport Promise = require(\"bluebird\");\r\nimport $Config = require(\"./config\");\r\nimport $ConfigSecret = require(\"./configSecret\");\r\nimport $log = require(\"./logger\");\r\n\r\nexport interface IDb {\r\n    test(): void;\r\n}\r\nexport var connectDB = Promise.promisify(mongoose.connect, mongoose);\r\n\r\nexport function connect() {\r\n    $log.debug(\"process.env:\" + process.env.NODE_ENV);\r\n    $log.debug(\"$Config.dbConnectString[process.env]\" + $Config.dbConnectString[process.env.NODE_ENV]);\r\n    $log.debug(\"$Config.dbConnectString[process.env].replace('XXXXXX', $ConfigSecret.db[process.env.NODE_ENV]):\"\r\n        + $Config.dbConnectString[process.env.NODE_ENV].replace(\"XXXXXX\", $ConfigSecret.db[process.env]));\r\n\r\n    let stringConnect:string = $Config.dbConnectString[process.env.NODE_ENV].replace(\"XXXXXX\", $ConfigSecret.db[process.env.NODE_ENV]);\r\n    connectDB(stringConnect,{})\r\n        .then(() => {\r\n            $log.debug(\"Connected to DB!\");\r\n        });\r\n}\r\n\r\nexport var disConnectDB = Promise.promisify(mongoose.disconnect, mongoose);\r\n"],"sourceRoot":"/source/"}