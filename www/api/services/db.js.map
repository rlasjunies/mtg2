{"version":3,"sources":["services/db.ts"],"names":["connect"],"mappings":"AAAA,OAAO,KAAK,QAAQ,MAAM,UAAU,CAAC;AACrC,OAAO,KAAK,OAAO,MAAM,UAAU,CAAC;AACpC,OAAO,KAAK,OAAO,MAAM,UAAU,CAAC;AACpC,OAAO,KAAK,aAAa,MAAM,gBAAgB,CAAC;AAChD,OAAO,KAAK,IAAI,MAAM,UAAU,CAAC;AAKjC,WAAW,SAAS,GAAG,OAAO,CAAC,SAAS,CAAC,QAAQ,CAAC,OAAO,EAAE,QAAQ,CAAC,CAAC;AAErE;IACIA,IAAIA,CAACA,KAAKA,CAACA,cAAcA,GAAGA,OAAOA,CAACA,GAAGA,CAACA,QAAQA,CAACA,CAACA;IAClDA,IAAIA,CAACA,KAAKA,CAACA,sCAAsCA,GAAGA,OAAOA,CAACA,eAAeA,CAACA,OAAOA,CAACA,GAAGA,CAACA,QAAQA,CAACA,CAACA,CAACA;IACnGA,IAAIA,CAACA,KAAKA,CAACA,iGAAiGA;UACtGA,OAAOA,CAACA,eAAeA,CAACA,OAAOA,CAACA,GAAGA,CAACA,QAAQA,CAACA,CAACA,OAAOA,CAACA,QAAQA,EAAEA,aAAaA,CAACA,EAAEA,CAACA,OAAOA,CAACA,GAAGA,CAACA,CAACA,CAACA,CAACA;IAEtGA,IAAIA,aAAaA,GAAUA,OAAOA,CAACA,eAAeA,CAACA,OAAOA,CAACA,GAAGA,CAACA,QAAQA,CAACA,CAACA,OAAOA,CAACA,QAAQA,EAAEA,aAAaA,CAACA,EAAEA,CAACA,OAAOA,CAACA,GAAGA,CAACA,QAAQA,CAACA,CAACA,CAACA;IACnIA,SAASA,CAACA,aAAaA,EAACA,EAAEA,CAACA;SACtBA,IAAIA,CAACA;QACFA,IAAIA,CAACA,KAAKA,CAACA,kBAAkBA,CAACA,CAACA;IACnCA,CAACA,CAACA,CAACA;AACXA,CAACA;AAED,WAAW,YAAY,GAAG,OAAO,CAAC,SAAS,CAAC,QAAQ,CAAC,UAAU,EAAE,QAAQ,CAAC,CAAC","file":"services/db.js","sourcesContent":["import * as mongoose from \"mongoose\";\r\nimport * as Promise from \"bluebird\";\r\nimport * as $Config from \"./config\";\r\nimport * as $ConfigSecret from \"./configSecret\";\r\nimport * as $log from \"./logger\";\r\n\r\nexport interface IDb {\r\n    test(): void;\r\n}\r\nexport var connectDB = Promise.promisify(mongoose.connect, mongoose);\r\n\r\nexport function connect() {\r\n    $log.debug(\"process.env:\" + process.env.NODE_ENV);\r\n    $log.debug(\"$Config.dbConnectString[process.env]\" + $Config.dbConnectString[process.env.NODE_ENV]);\r\n    $log.debug(\"$Config.dbConnectString[process.env].replace('XXXXXX', $ConfigSecret.db[process.env.NODE_ENV]):\"\r\n        + $Config.dbConnectString[process.env.NODE_ENV].replace(\"XXXXXX\", $ConfigSecret.db[process.env]));\r\n\r\n    let stringConnect:string = $Config.dbConnectString[process.env.NODE_ENV].replace(\"XXXXXX\", $ConfigSecret.db[process.env.NODE_ENV]);\r\n    connectDB(stringConnect,{})\r\n        .then(() => {\r\n            $log.debug(\"Connected to DB!\");\r\n        });\r\n}\r\n\r\nexport var disConnectDB = Promise.promisify(mongoose.disconnect, mongoose);\r\n"],"sourceRoot":"/source/"}